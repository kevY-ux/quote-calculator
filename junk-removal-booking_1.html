<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Junk Solutions of Texas - Book Now</title>
    <link href="https://fonts.googleapis.com/css2?family=Work+Sans:wght@400;600;700&family=Bitter:wght@700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #2D5016;
            --primary-light: #4A7C2C;
            --accent: #F59E0B;
            --dark: #1F2937;
            --gray: #6B7280;
            --light-gray: #F3F4F6;
            --border: #E5E7EB;
            --white: #FFFFFF;
            --success: #10B981;
            --warning: #EF4444;
        }

        body {
            font-family: 'Work Sans', sans-serif;
            background: linear-gradient(135deg, #F3F4F6 0%, #E5E7EB 100%);
            color: var(--dark);
            line-height: 1.6;
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            background: var(--white);
            padding: 30px 0;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            margin-bottom: 40px;
        }

        h1 {
            font-family: 'Bitter', serif;
            font-size: 2.5rem;
            color: var(--primary);
            text-align: center;
            margin-bottom: 10px;
        }

        .tagline {
            text-align: center;
            color: var(--gray);
            font-size: 1.1rem;
        }

        .main-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 40px;
        }

        @media (max-width: 968px) {
            .main-grid {
                grid-template-columns: 1fr;
            }
        }

        .card {
            background: var(--white);
            border-radius: 12px;
            padding: 30px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.07);
        }

        .card h2 {
            font-family: 'Bitter', serif;
            color: var(--primary);
            margin-bottom: 20px;
            font-size: 1.8rem;
            border-bottom: 3px solid var(--accent);
            padding-bottom: 10px;
        }

        .form-group {
            margin-bottom: 25px;
        }

        label {
            display: block;
            font-weight: 600;
            margin-bottom: 8px;
            color: var(--dark);
        }

        .info-text {
            font-size: 0.9rem;
            color: var(--gray);
            margin-top: 5px;
        }

        select, input[type="text"], input[type="email"], input[type="tel"], input[type="date"], input[type="time"], textarea {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid var(--border);
            border-radius: 8px;
            font-size: 1rem;
            font-family: 'Work Sans', sans-serif;
            transition: all 0.3s ease;
        }

        select:focus, input:focus, textarea:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(45, 80, 22, 0.1);
        }

        .load-size-options {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-top: 10px;
        }

        .load-option {
            border: 2px solid var(--border);
            border-radius: 8px;
            padding: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
        }

        .load-option:hover {
            border-color: var(--primary-light);
            background: rgba(45, 80, 22, 0.03);
        }

        .load-option.selected {
            border-color: var(--primary);
            background: rgba(45, 80, 22, 0.08);
            box-shadow: 0 0 0 3px rgba(45, 80, 22, 0.1);
        }

        .load-option input[type="radio"] {
            display: none;
        }

        .load-title {
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 5px;
        }

        .load-desc {
            font-size: 0.85rem;
            color: var(--gray);
        }

        .checkbox-group {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
        }

        .checkbox-group input[type="checkbox"] {
            width: 20px;
            height: 20px;
            margin-right: 10px;
            cursor: pointer;
        }

        .checkbox-group label {
            margin-bottom: 0;
            cursor: pointer;
        }

        .price-breakdown {
            background: var(--light-gray);
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
        }

        .price-row {
            display: flex;
            justify-content: space-between;
            padding: 10px 0;
            border-bottom: 1px solid var(--border);
        }

        .price-row:last-child {
            border-bottom: none;
        }

        .price-label {
            color: var(--gray);
        }

        .price-value {
            font-weight: 600;
            color: var(--dark);
        }

        .total-row {
            font-size: 1.3rem;
            margin-top: 10px;
            padding-top: 15px;
            border-top: 3px solid var(--primary);
        }

        .total-row .price-label {
            color: var(--primary);
            font-weight: 700;
        }

        .total-row .price-value {
            color: var(--primary);
            font-weight: 700;
        }

        .payment-options {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin: 20px 0;
        }

        .payment-option {
            border: 2px solid var(--border);
            border-radius: 8px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
        }

        .payment-option:hover {
            border-color: var(--primary-light);
        }

        .payment-option.selected {
            border-color: var(--primary);
            background: rgba(45, 80, 22, 0.05);
        }

        .payment-option input[type="radio"] {
            display: none;
        }

        .payment-title {
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 5px;
        }

        .payment-amount {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--accent);
            margin: 10px 0;
        }

        .payment-desc {
            font-size: 0.85rem;
            color: var(--gray);
        }

        .btn {
            background: var(--primary);
            color: var(--white);
            border: none;
            padding: 15px 30px;
            border-radius: 8px;
            font-size: 1.1rem;
            font-weight: 700;
            cursor: pointer;
            width: 100%;
            transition: all 0.3s ease;
            font-family: 'Work Sans', sans-serif;
        }

        .btn:hover {
            background: var(--primary-light);
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(45, 80, 22, 0.2);
        }

        .btn:disabled {
            background: var(--gray);
            cursor: not-allowed;
            transform: none;
        }

        .visual-guide {
            background: var(--light-gray);
            border-radius: 8px;
            padding: 15px;
            margin-top: 15px;
        }

        .visual-guide h4 {
            color: var(--primary);
            margin-bottom: 10px;
        }

        .visual-guide ul {
            margin-left: 20px;
        }

        .visual-guide li {
            color: var(--gray);
            margin-bottom: 5px;
        }

        .alert {
            padding: 15px;
            border-radius: 8px;
            margin: 20px 0;
            display: none;
        }

        .alert.success {
            background: #D1FAE5;
            border: 2px solid var(--success);
            color: #065F46;
            display: block;
        }

        .alert.warning {
            background: #FEE2E2;
            border: 2px solid var(--warning);
            color: #991B1B;
        }

        .booking-confirmation {
            display: none;
        }

        .booking-confirmation.active {
            display: block;
        }

        .confirmation-box {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-light) 100%);
            color: var(--white);
            border-radius: 12px;
            padding: 40px;
            text-align: center;
            margin-bottom: 30px;
        }

        .confirmation-box h2 {
            color: var(--white);
            border: none;
            margin-bottom: 15px;
        }

        .checkmark {
            font-size: 4rem;
            margin-bottom: 20px;
        }

        .booking-details {
            background: var(--white);
            border-radius: 12px;
            padding: 30px;
            margin-top: 20px;
        }

        .detail-row {
            display: flex;
            justify-content: space-between;
            padding: 15px 0;
            border-bottom: 1px solid var(--border);
        }

        .detail-row:last-child {
            border-bottom: none;
        }

        .detail-label {
            font-weight: 600;
            color: var(--gray);
        }

        .detail-value {
            color: var(--dark);
            font-weight: 600;
        }

        .admin-view {
            display: none;
            margin-top: 40px;
        }

        .admin-view.active {
            display: block;
        }

        .admin-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .btn-secondary {
            background: var(--gray);
            padding: 10px 20px;
            font-size: 0.9rem;
        }

        .btn-secondary:hover {
            background: var(--dark);
        }

        .booking-card {
            background: var(--white);
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 15px;
            border-left: 4px solid var(--accent);
        }

        .booking-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 15px;
        }

        .booking-id {
            font-weight: 700;
            color: var(--primary);
        }

        .booking-status {
            background: var(--accent);
            color: var(--white);
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 600;
        }

        .booking-info {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            font-size: 0.9rem;
        }

        .info-item {
            color: var(--gray);
        }

        .info-item strong {
            color: var(--dark);
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .card {
            animation: slideIn 0.5s ease;
        }

        .fade-in {
            animation: slideIn 0.3s ease;
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <h1>ðŸš› Junk Solutions of Texas</h1>
            <p class="tagline">Fast, Fair, & Hassle-Free â€” Book Your Junk Removal Today</p>
        </div>
    </header>

    <div class="container">
        <!-- Booking Form -->
        <div class="booking-form" id="bookingForm">
            <div class="main-grid">
                <!-- Left Column: Service Details -->
                <div class="card">
                    <h2>1. Service Details</h2>
                    
                    <div class="form-group">
                        <label>Truck Load Size *</label>
                        <div class="load-size-options" id="loadSizeOptions">
                            <div class="load-option" data-load="eighth">
                                <input type="radio" name="loadSize" value="eighth" id="eighth">
                                <div class="load-title">1/8 Truck</div>
                                <div class="load-desc">Single item or small pile</div>
                            </div>
                            <div class="load-option" data-load="quarter">
                                <input type="radio" name="loadSize" value="quarter" id="quarter">
                                <div class="load-title">1/4 Truck</div>
                                <div class="load-desc">Small furniture set</div>
                            </div>
                            <div class="load-option" data-load="half">
                                <input type="radio" name="loadSize" value="half" id="half">
                                <div class="load-title">1/2 Truck</div>
                                <div class="load-desc">Room cleanout</div>
                            </div>
                            <div class="load-option" data-load="threequarter">
                                <input type="radio" name="loadSize" value="threequarter" id="threequarter">
                                <div class="load-title">3/4 Truck</div>
                                <div class="load-desc">Large cleanout</div>
                            </div>
                            <div class="load-option" data-load="full">
                                <input type="radio" name="loadSize" value="full" id="full">
                                <div class="load-title">Full Truck</div>
                                <div class="load-desc">Complete estate cleanout</div>
                            </div>
                        </div>
                        
                        <div class="visual-guide">
                            <h4>Not sure? Here's a guide:</h4>
                            <ul>
                                <li><strong>1/8 Truck:</strong> 1-2 items (mattress, couch, appliance)</li>
                                <li><strong>1/4 Truck:</strong> 10-15 bags or boxes</li>
                                <li><strong>1/2 Truck:</strong> 1 bedroom worth of items</li>
                                <li><strong>3/4 Truck:</strong> 2 bedrooms or garage cleanout</li>
                                <li><strong>Full Truck:</strong> Whole home or major renovation debris</li>
                            </ul>
                        </div>
                    </div>

                    <div class="form-group">
                        <label>Additional Services</label>
                        <div class="checkbox-group">
                            <input type="checkbox" id="heavyItems" name="heavyItems">
                            <label for="heavyItems">Heavy Items (+$40) â€” Appliances, safes, concrete</label>
                        </div>
                        <div class="checkbox-group">
                            <input type="checkbox" id="stairs" name="stairs">
                            <label for="stairs">Stairs/Difficult Access (+$50) â€” Multiple flights or tight spaces</label>
                        </div>
                        <div class="checkbox-group">
                            <input type="checkbox" id="hazardous" name="hazardous">
                            <label for="hazardous">Hazardous Materials (+$75) â€” Paint, chemicals, batteries</label>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="serviceDate">Preferred Date *</label>
                        <input type="date" id="serviceDate" required>
                    </div>

                    <div class="form-group">
                        <label for="serviceTime">Preferred Time *</label>
                        <select id="serviceTime" required>
                            <option value="">Select a time</option>
                            <option value="8am">8:00 AM - 10:00 AM</option>
                            <option value="10am">10:00 AM - 12:00 PM</option>
                            <option value="12pm">12:00 PM - 2:00 PM</option>
                            <option value="2pm">2:00 PM - 4:00 PM</option>
                            <option value="4pm">4:00 PM - 6:00 PM</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="address">Service Address *</label>
                        <input type="text" id="address" placeholder="123 Main St, City, State ZIP" required>
                    </div>

                    <div class="form-group">
                        <label for="notes">Special Instructions (Optional)</label>
                        <textarea id="notes" rows="3" placeholder="Gate code, parking instructions, item details, etc."></textarea>
                    </div>
                </div>

                <!-- Right Column: Contact & Payment -->
                <div class="card">
                    <h2>2. Your Information</h2>
                    
                    <div class="form-group">
                        <label for="fullName">Full Name *</label>
                        <input type="text" id="fullName" required>
                    </div>

                    <div class="form-group">
                        <label for="email">Email *</label>
                        <input type="email" id="email" required>
                    </div>

                    <div class="form-group">
                        <label for="phone">Phone Number *</label>
                        <input type="tel" id="phone" placeholder="(555) 123-4567" required>
                    </div>

                    <h2 style="margin-top: 30px;">3. Price & Payment</h2>
                    
                    <div class="price-breakdown" id="priceBreakdown">
                        <div class="price-row">
                            <span class="price-label">Base Service</span>
                            <span class="price-value" id="basePrice">$0.00</span>
                        </div>
                        <div class="price-row" id="heavyItemsRow" style="display: none;">
                            <span class="price-label">Heavy Items</span>
                            <span class="price-value">$40.00</span>
                        </div>
                        <div class="price-row" id="stairsRow" style="display: none;">
                            <span class="price-label">Stairs/Difficult Access</span>
                            <span class="price-value">$50.00</span>
                        </div>
                        <div class="price-row" id="hazardousRow" style="display: none;">
                            <span class="price-label">Hazardous Materials</span>
                            <span class="price-value">$75.00</span>
                        </div>
                        <div class="price-row total-row">
                            <span class="price-label">Total Price</span>
                            <span class="price-value" id="totalPrice">$0.00</span>
                        </div>
                    </div>

                    <p style="color: var(--gray); font-size: 0.9rem; margin-bottom: 20px;">
                        <strong>Price includes:</strong> Labor, dump/recycling fees, fuel, and all equipment. No hidden charges!
                    </p>

                    <div class="form-group">
                        <label>Payment Option *</label>
                        <div class="payment-options">
                            <div class="payment-option" data-payment="deposit">
                                <input type="radio" name="paymentOption" value="deposit" id="depositOption">
                                <div class="payment-title">50% Deposit</div>
                                <div class="payment-amount" id="depositAmount">$0.00</div>
                                <div class="payment-desc">Pay remaining after service</div>
                            </div>
                            <div class="payment-option" data-payment="later">
                                <input type="radio" name="paymentOption" value="later" id="laterOption">
                                <div class="payment-title">Pay After Service</div>
                                <div class="payment-amount" id="laterAmount">$0.00</div>
                                <div class="payment-desc">Card secured, charged after</div>
                            </div>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="cardNumber">Card Number (Required to Secure Booking) *</label>
                        <input type="text" id="cardNumber" placeholder="1234 5678 9012 3456" maxlength="19" required>
                    </div>

                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                        <div class="form-group">
                            <label for="expiry">Expiry *</label>
                            <input type="text" id="expiry" placeholder="MM/YY" maxlength="5" required>
                        </div>
                        <div class="form-group">
                            <label for="cvv">CVV *</label>
                            <input type="text" id="cvv" placeholder="123" maxlength="3" required>
                        </div>
                    </div>

                    <button class="btn" id="bookNowBtn" disabled>Complete Booking</button>
                    
                    <p style="color: var(--gray); font-size: 0.85rem; margin-top: 15px; text-align: center;">
                        ðŸ”’ Your payment information is secure. We never store card details.
                    </p>
                </div>
            </div>
        </div>

        <!-- Booking Confirmation -->
        <div class="booking-confirmation" id="bookingConfirmation">
            <div class="confirmation-box fade-in">
                <div class="checkmark">âœ“</div>
                <h2>Booking Confirmed!</h2>
                <p>Your junk removal is scheduled. We'll send a confirmation email shortly.</p>
            </div>

            <div class="booking-details fade-in">
                <h3 style="color: var(--primary); margin-bottom: 20px;">Booking Details</h3>
                <div class="detail-row">
                    <span class="detail-label">Booking ID</span>
                    <span class="detail-value" id="confirmBookingId">#</span>
                </div>
                <div class="detail-row">
                    <span class="detail-label">Service Date</span>
                    <span class="detail-value" id="confirmDate">-</span>
                </div>
                <div class="detail-row">
                    <span class="detail-label">Service Time</span>
                    <span class="detail-value" id="confirmTime">-</span>
                </div>
                <div class="detail-row">
                    <span class="detail-label">Load Size</span>
                    <span class="detail-value" id="confirmLoadSize">-</span>
                </div>
                <div class="detail-row">
                    <span class="detail-label">Address</span>
                    <span class="detail-value" id="confirmAddress">-</span>
                </div>
                <div class="detail-row">
                    <span class="detail-label">Total Price</span>
                    <span class="detail-value" id="confirmTotal">$0.00</span>
                </div>
                <div class="detail-row">
                    <span class="detail-label">Payment Status</span>
                    <span class="detail-value" id="confirmPayment">-</span>
                </div>
            </div>

            <button class="btn" onclick="location.reload()" style="margin-top: 20px;">Book Another Service</button>
        </div>

        <!-- Admin View -->
        <div class="admin-view" id="adminView">
            <div class="card">
                <div class="admin-header">
                    <h2>Your Bookings Dashboard</h2>
                    <button class="btn btn-secondary" onclick="toggleAdminView()">Back to Booking</button>
                </div>
                <div id="bookingsList"></div>
            </div>
        </div>

        <!-- Admin Toggle (Hidden button for you to access admin) -->
        <div style="text-align: center; margin-top: 30px;">
            <button class="btn btn-secondary" onclick="toggleAdminView()" style="width: auto;">
                View All Bookings (Admin)
            </button>
        </div>
    </div>

    <script>
        // Pricing Logic
        const pricing = {
            // Base prices include: dump fees + fuel + hourly rate + insurance allocation + 40% margin
            loads: {
                eighth: {
                    basePrice: 210,
                    dumpFee: 130,
                    estimatedHours: 1.5,
                    fuelCost: 15,
                    description: '1/8 Truck Load'
                },
                quarter: {
                    basePrice: 275,
                    dumpFee: 130,
                    estimatedHours: 2,
                    fuelCost: 20,
                    description: '1/4 Truck Load'
                },
                half: {
                    basePrice: 385,
                    dumpFee: 130,
                    estimatedHours: 3,
                    fuelCost: 25,
                    description: '1/2 Truck Load'
                },
                threequarter: {
                    basePrice: 520,
                    dumpFee: 220,
                    estimatedHours: 4,
                    fuelCost: 30,
                    description: '3/4 Truck Load'
                },
                full: {
                    basePrice: 665,
                    dumpFee: 220,
                    estimatedHours: 5,
                    fuelCost: 35,
                    description: 'Full Truck Load'
                }
            },
            addons: {
                heavyItems: 40,
                stairs: 50,
                hazardous: 75
            }
        };

        // Calculate pricing with breakdown
        function calculatePricing(loadSize, hours) {
            const load = pricing.loads[loadSize];
            const hourlyRate = 60;
            const monthlyInsurance = 300;
            const dailyInsurance = monthlyInsurance / 30; // ~$10/day
            
            // Cost calculation
            const laborCost = hourlyRate * hours;
            const totalCost = load.dumpFee + load.fuelCost + laborCost + dailyInsurance;
            
            // Add 40% margin and round to nearest $5
            const priceWithMargin = totalCost * 1.4;
            const finalPrice = Math.ceil(priceWithMargin / 5) * 5;
            
            return finalPrice;
        }

        // Initialize bookings from localStorage
        let bookings = JSON.parse(localStorage.getItem('junkRemovalBookings')) || [];

        // DOM Elements
        const loadOptions = document.querySelectorAll('.load-option');
        const paymentOptions = document.querySelectorAll('.payment-option');
        const bookNowBtn = document.getElementById('bookNowBtn');
        
        // Load Size Selection
        loadOptions.forEach(option => {
            option.addEventListener('click', function() {
                loadOptions.forEach(opt => opt.classList.remove('selected'));
                this.classList.add('selected');
                const radio = this.querySelector('input[type="radio"]');
                radio.checked = true;
                updatePrice();
                validateForm();
            });
        });

        // Payment Option Selection
        paymentOptions.forEach(option => {
            option.addEventListener('click', function() {
                paymentOptions.forEach(opt => opt.classList.remove('selected'));
                this.classList.add('selected');
                const radio = this.querySelector('input[type="radio"]');
                radio.checked = true;
                validateForm();
            });
        });

        // Addon checkboxes
        document.querySelectorAll('input[type="checkbox"]').forEach(checkbox => {
            checkbox.addEventListener('change', updatePrice);
        });

        // Update Price Breakdown
        function updatePrice() {
            const selectedLoad = document.querySelector('input[name="loadSize"]:checked');
            if (!selectedLoad) {
                document.getElementById('basePrice').textContent = '$0.00';
                document.getElementById('totalPrice').textContent = '$0.00';
                document.getElementById('depositAmount').textContent = '$0.00';
                document.getElementById('laterAmount').textContent = '$0.00';
                return;
            }

            const loadType = selectedLoad.value;
            const loadData = pricing.loads[loadType];
            
            let basePrice = calculatePricing(loadType, loadData.estimatedHours);
            let total = basePrice;

            // Add-ons
            const heavyItems = document.getElementById('heavyItems').checked;
            const stairs = document.getElementById('stairs').checked;
            const hazardous = document.getElementById('hazardous').checked;

            document.getElementById('heavyItemsRow').style.display = heavyItems ? 'flex' : 'none';
            document.getElementById('stairsRow').style.display = stairs ? 'flex' : 'none';
            document.getElementById('hazardousRow').style.display = hazardous ? 'flex' : 'none';

            if (heavyItems) total += pricing.addons.heavyItems;
            if (stairs) total += pricing.addons.stairs;
            if (hazardous) total += pricing.addons.hazardous;

            // Update display
            document.getElementById('basePrice').textContent = `$${basePrice.toFixed(2)}`;
            document.getElementById('totalPrice').textContent = `$${total.toFixed(2)}`;
            
            const deposit = total * 0.5;
            document.getElementById('depositAmount').textContent = `$${deposit.toFixed(2)}`;
            document.getElementById('laterAmount').textContent = `$${total.toFixed(2)}`;
        }

        // Form Validation
        function validateForm() {
            const loadSize = document.querySelector('input[name="loadSize"]:checked');
            const serviceDate = document.getElementById('serviceDate').value;
            const serviceTime = document.getElementById('serviceTime').value;
            const address = document.getElementById('address').value;
            const fullName = document.getElementById('fullName').value;
            const email = document.getElementById('email').value;
            const phone = document.getElementById('phone').value;
            const paymentOption = document.querySelector('input[name="paymentOption"]:checked');
            const cardNumber = document.getElementById('cardNumber').value;
            const expiry = document.getElementById('expiry').value;
            const cvv = document.getElementById('cvv').value;

            const isValid = loadSize && serviceDate && serviceTime && address && 
                          fullName && email && phone && paymentOption && 
                          cardNumber.length >= 15 && expiry.length === 5 && cvv.length === 3;

            bookNowBtn.disabled = !isValid;
        }

        // Add event listeners for validation
        document.querySelectorAll('input, select, textarea').forEach(element => {
            element.addEventListener('input', validateForm);
            element.addEventListener('change', validateForm);
        });

        // Card number formatting
        document.getElementById('cardNumber').addEventListener('input', function(e) {
            let value = e.target.value.replace(/\s/g, '');
            let formattedValue = value.match(/.{1,4}/g)?.join(' ') || value;
            e.target.value = formattedValue;
        });

        // Expiry formatting
        document.getElementById('expiry').addEventListener('input', function(e) {
            let value = e.target.value.replace(/\D/g, '');
            if (value.length >= 2) {
                value = value.slice(0, 2) + '/' + value.slice(2, 4);
            }
            e.target.value = value;
        });

        // Set minimum date to today
        const today = new Date().toISOString().split('T')[0];
        document.getElementById('serviceDate').min = today;

        // Book Now
        bookNowBtn.addEventListener('click', function(e) {
            e.preventDefault();
            
            const selectedLoad = document.querySelector('input[name="loadSize"]:checked');
            const loadType = selectedLoad.value;
            const loadData = pricing.loads[loadType];
            
            let total = calculatePricing(loadType, loadData.estimatedHours);
            
            if (document.getElementById('heavyItems').checked) total += pricing.addons.heavyItems;
            if (document.getElementById('stairs').checked) total += pricing.addons.stairs;
            if (document.getElementById('hazardous').checked) total += pricing.addons.hazardous;

            const paymentOption = document.querySelector('input[name="paymentOption"]:checked').value;
            
            const booking = {
                id: 'JR-' + Date.now(),
                date: document.getElementById('serviceDate').value,
                time: document.getElementById('serviceTime').value,
                loadSize: loadData.description,
                address: document.getElementById('address').value,
                name: document.getElementById('fullName').value,
                email: document.getElementById('email').value,
                phone: document.getElementById('phone').value,
                notes: document.getElementById('notes').value,
                heavyItems: document.getElementById('heavyItems').checked,
                stairs: document.getElementById('stairs').checked,
                hazardous: document.getElementById('hazardous').checked,
                total: total,
                paymentOption: paymentOption,
                paymentStatus: paymentOption === 'deposit' ? `50% Deposit Paid ($${(total * 0.5).toFixed(2)})` : 'Card on File - Pay After Service',
                cardLast4: document.getElementById('cardNumber').value.slice(-4),
                status: 'Confirmed',
                createdAt: new Date().toISOString()
            };

            // Save booking
            bookings.push(booking);
            localStorage.setItem('junkRemovalBookings', JSON.stringify(bookings));

            // Show confirmation
            document.getElementById('bookingForm').style.display = 'none';
            document.getElementById('bookingConfirmation').classList.add('active');

            // Populate confirmation
            document.getElementById('confirmBookingId').textContent = booking.id;
            document.getElementById('confirmDate').textContent = new Date(booking.date).toLocaleDateString();
            document.getElementById('confirmTime').textContent = booking.time;
            document.getElementById('confirmLoadSize').textContent = booking.loadSize;
            document.getElementById('confirmAddress').textContent = booking.address;
            document.getElementById('confirmTotal').textContent = `$${booking.total.toFixed(2)}`;
            document.getElementById('confirmPayment').textContent = booking.paymentStatus;

            // Scroll to top
            window.scrollTo({ top: 0, behavior: 'smooth' });
        });

        // Admin View Toggle
        function toggleAdminView() {
            const adminView = document.getElementById('adminView');
            const bookingForm = document.getElementById('bookingForm');
            
            if (adminView.classList.contains('active')) {
                adminView.classList.remove('active');
                bookingForm.style.display = 'block';
            } else {
                adminView.classList.add('active');
                bookingForm.style.display = 'none';
                displayBookings();
            }
            
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // Display Bookings
        function displayBookings() {
            const bookingsList = document.getElementById('bookingsList');
            
            if (bookings.length === 0) {
                bookingsList.innerHTML = '<p style="text-align: center; color: var(--gray); padding: 40px;">No bookings yet. Your first booking will appear here!</p>';
                return;
            }

            // Sort by date (newest first)
            const sortedBookings = [...bookings].sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt));

            bookingsList.innerHTML = sortedBookings.map(booking => `
                <div class="booking-card">
                    <div class="booking-header">
                        <span class="booking-id">${booking.id}</span>
                        <span class="booking-status">${booking.status}</span>
                    </div>
                    <div class="booking-info">
                        <div class="info-item"><strong>Customer:</strong> ${booking.name}</div>
                        <div class="info-item"><strong>Phone:</strong> ${booking.phone}</div>
                        <div class="info-item"><strong>Date:</strong> ${new Date(booking.date).toLocaleDateString()}</div>
                        <div class="info-item"><strong>Time:</strong> ${booking.time}</div>
                        <div class="info-item"><strong>Load:</strong> ${booking.loadSize}</div>
                        <div class="info-item"><strong>Total:</strong> $${booking.total.toFixed(2)}</div>
                        <div class="info-item" style="grid-column: 1 / -1;"><strong>Address:</strong> ${booking.address}</div>
                        ${booking.notes ? `<div class="info-item" style="grid-column: 1 / -1;"><strong>Notes:</strong> ${booking.notes}</div>` : ''}
                        <div class="info-item" style="grid-column: 1 / -1;"><strong>Payment:</strong> ${booking.paymentStatus}</div>
                        <div class="info-item" style="grid-column: 1 / -1;"><strong>Card:</strong> â€¢â€¢â€¢â€¢ ${booking.cardLast4}</div>
                    </div>
                </div>
            `).join('');
        }

        // Initialize
        updatePrice();
        validateForm();
    </script>
</body>
</html>